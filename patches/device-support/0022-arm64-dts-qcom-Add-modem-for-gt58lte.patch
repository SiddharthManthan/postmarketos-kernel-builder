From 0220961c1698ba199031ba88f65b282192f32c04 Mon Sep 17 00:00:00 2001
From: Siddharth Manthan <siddharth_manthan@outlook.com>
Date: Fri, 7 May 2021 13:31:12 +0530
Subject: [PATCH 22/24] arm64: dts: qcom: Add modem for gt58lte

Signed-off-by: Siddharth Manthan <siddharth_manthan@outlook.com>
---
 arch/arm64/boot/dts/qcom/Makefile             |  2 +-
 .../qcom/msm8916-samsung-gt58lte-modem.dts    | 61 +++++++++++++++++++
 2 files changed, 62 insertions(+), 1 deletion(-)
 create mode 100644 arch/arm64/boot/dts/qcom/msm8916-samsung-gt58lte-modem.dts

diff --git a/arch/arm64/boot/dts/qcom/Makefile b/arch/arm64/boot/dts/qcom/Makefile
index 6b56e370f9..398d032448 100644
--- a/arch/arm64/boot/dts/qcom/Makefile
+++ b/arch/arm64/boot/dts/qcom/Makefile
@@ -23,7 +23,7 @@ dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-a3u-eur.dtb msm8916-samsung-a3u-eur-m
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-a5u-eur.dtb msm8916-samsung-a5u-eur-modem.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-gprimeltecan.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-gt510.dtb msm8916-samsung-gt510lte-modem.dtb
-dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-gt58.dtb
+dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-gt58.dtb msm8916-samsung-gt58lte-modem.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-j3ltespr.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-samsung-j5nlte.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= msm8916-wingtech-wt86518.dtb msm8916-wingtech-wt86518-modem.dtb
diff --git a/arch/arm64/boot/dts/qcom/msm8916-samsung-gt58lte-modem.dts b/arch/arm64/boot/dts/qcom/msm8916-samsung-gt58lte-modem.dts
new file mode 100644
index 0000000000..cd0d28b5e1
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/msm8916-samsung-gt58lte-modem.dts
@@ -0,0 +1,61 @@
+// SPDX-License-Identifier: GPL-2.0-only
+
+#include "msm8916-samsung-gt58.dts"
+#include "msm8916-modem.dtsi"
+
+/ {
+	model = "Samsung Galaxy Tab A 8.0 LTE (2015) (SM-T355)";
+	compatible = "samsung,gt58lte", "samsung,gt58", "qcom,msm8916";
+};
+
+&q6afedai {
+	dai@22 {
+		reg = <QUATERNARY_MI2S_RX>;
+		qcom,sd-lines = <1>;
+	};
+};
+
+&sound {
+	/delete-node/ dai-link-primary;
+	/delete-node/ dai-link-tertiary;
+	/delete-node/ dai-link-quaternary;
+
+	dai-link-primary-qdsp6 {
+		link-name = "Primary MI2S";
+		cpu {
+			sound-dai = <&q6afedai PRIMARY_MI2S_RX>;
+		};
+		platform {
+			sound-dai = <&q6routing>;
+		};
+		codec {
+			sound-dai = <&lpass_codec 0>, <&wcd_codec 0>;
+		};
+	};
+
+	dai-link-tertiary-qdsp6 {
+		link-name = "Tertiary MI2S";
+		cpu {
+			sound-dai = <&q6afedai TERTIARY_MI2S_TX>;
+		};
+		platform {
+			sound-dai = <&q6routing>;
+		};
+		codec {
+			sound-dai = <&lpass_codec 1>, <&wcd_codec 1>;
+		};
+	};
+
+	dai-link-quaternary-qdsp6 {
+		link-name = "Quaternary MI2S";
+		cpu {
+			sound-dai = <&q6afedai QUATERNARY_MI2S_RX>;
+		};
+		platform {
+			sound-dai = <&q6routing>;
+		};
+		codec {
+			sound-dai = <&speaker_codec>;
+		};
+	};
+};
-- 
2.25.1

